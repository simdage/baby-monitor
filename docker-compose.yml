version: '3.8'

services:
  baby-monitor:
    build: .
    ports:
      - "8000:8000"
    volumes:
      # Mount Google Cloud Credentials from the host
      - ~/.config/gcloud:/root/.config/gcloud
    environment:
      # Use the application default credentials found in the mounted volume
      - GOOGLE_APPLICATION_CREDENTIALS=/root/.config/gcloud/application_default_credentials.json
      # Ensure these match your actual cloud setup
      - GCP_PROJECT_ID=baby-monitor-479819
      - BIGQUERY_TABLE_ID=baby_analytics.predictions
      - GCS_BUCKET_NAME=audio_logs
      # Remote Camera URL (e.g. http://192.168.0.28:8080/video_feed)
      - CAMERA_SERVER_URL=${CAMERA_SERVER_URL}
      # Optional Slack Webhook
      - SLACK_WEBHOOK_URL=${SLACK_WEBHOOK_URL}
